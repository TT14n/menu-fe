# 前端配置说明

## 后端API配置

在项目根目录创建 `.env` 文件，配置后端地址：

```env
VITE_API_BASE_URL=http://localhost:8080
```

## 主要更新内容

### 1. 类型定义同步（src/types.ts）
- ✅ 枚举类型与后端完全一致
  - `StorageType`: '常温' | '冷藏' | '冷冻'
  - `IngredientCategory`: '水果' | '蔬菜' | '肉类' | '碳水' | '调料'
  - `RecipeType`: '快手菜' | '功夫菜'
- ✅ 实体类型与后端对应
  - `Ingredient` - 食材元数据
  - `Inventory` - 库存
  - `Recipe` - 菜谱
  - `PurchaseRequest` - 购买请求

### 2. API接口适配（src/api/index.ts）
- ✅ 完整实现所有后端接口
  - 食材管理：增删改查、搜索
  - 菜谱管理：列表、详情、检查
  - 库存管理：入库、出库、临期查询
  - 购买管理：生成计划、确认购买
- ✅ 统一响应格式处理（Result<T>）
- ✅ 保留Mock数据用于测试

### 3. 日期工具更新（src/utils/dateUtils.ts）
- ✅ 适配后端日期格式（YYYY-MM-DD）
- ✅ 基于过期日期计算剩余天数
- ✅ 新增日期格式化函数

### 4. 组件更新
- ✅ StorageArea：显示库存信息，支持按储存方式筛选
- ✅ RecipeArea：显示菜谱，支持选择生成购物清单
- ✅ ShoppingList：显示购物清单和临期预警

### 5. 主应用逻辑（src/app.tsx）
- ✅ 支持测试数据/真实数据切换
- ✅ 购物清单自动计算缺少的食材
- ✅ 确认购买后调用后端API入库
- ✅ 临期食材预警

## 使用说明

### 测试模式
1. 勾选"测试数据"复选框
2. 使用内置Mock数据进行测试
3. 无需启动后端服务

### 生产模式
1. 取消勾选"测试数据"
2. 确保后端服务已启动（默认 http://localhost:8080）
3. 前端会自动调用后端API

## 开发建议

### 启动开发服务器
```bash
npm install
npm run dev
```

### 构建生产版本
```bash
npm run build
```

### 后端联调
1. 确保后端服务运行在 `http://localhost:8080`
2. 取消勾选"测试数据"
3. 检查浏览器控制台是否有API错误

## 注意事项

1. **枚举值必须与后端一致**：前端使用中文枚举值（如"冷藏"），与后端完全匹配
2. **日期格式**：统一使用 `YYYY-MM-DD` 格式
3. **ID类型**：后端使用 `Long`（number），前端使用 `number`
4. **响应格式**：所有接口返回 `Result<T>` 格式，已在拦截器中自动解包

## API文档

详细的API接口文档请参考 `API文档.md`


